<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Formulario de registro</title>
    <link rel="stylesheet" href="../../CSS/Registro.css">
    <script>
    function validarFormulario(event) {
        // Obtenemos los valores de los campos
        const primerNombre = document.getElementById('primerNombre').value.trim();
        const apellido = document.getElementById('apellido').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        // Asegúrate de usar el ID correcto para el campo de Rol (en tu HTML es 'Rol')
        const rol = document.getElementById('Rol').value.trim();

        // --- 1. Validaciones de Campos Vacíos ---
        if (primerNombre === '' || apellido === '' || email === '' || password === '' || rol === '' || rol === 'Seleccione un rol') {
            alert('Todos los campos son obligatorios.');
            event.preventDefault(); // Detiene el envío
            return false;           // Detiene la función (CLAVE)
        }

        // --- 2. Validación de Contraseña (Largo) ---
        // Sintaxis corregida: se debe usar '||' para OR
        if (password.length < 8 || password.length > 12) {
            alert('La contraseña debe tener entre 8 y 12 caracteres.');
            event.preventDefault();
            return false;
        }

        // --- 3. Validación de Contraseña (Complejidad) ---
        const complejidadRegex = /^(?=.*[0-9])(?=.*[A-Z]).*$/;
        if (!complejidadRegex.test(password)) {
            alert('La contraseña debe contener al menos una letra mayúscula y un número.');
            event.preventDefault();
            return false;
        }

        // --- 4. Validación de Email (Formato) ---
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert('El formato del correo electrónico no es válido.');
            event.preventDefault();
            return false;
        }

        // Si la función llega hasta aquí, significa que todas las validaciones pasaron.
        return true;
    }

</script>
</head>

<body>
<h1><strong>NUTRILIFE</strong></h1>

<div id="form-container">
    <p class ="a">Registro de usuario</p>

    <form method="post" action="procesar_registro.php" autocomplete="on" onsubmit="validarFormulario(event)">
        <p><label>Ingresa tu/s nombre/s:
            <input type="text" id="primerNombre" name="primerNombre" required placeholder="primerNombre"/>
        </label></p>

        <p><label>Ingresa tus apellidos:
            <input type="text" id="apellido" name="apellido" required placeholder="Apellido" />
        </label></p>

        <p><label>Ingresa tu correo electrónico:
            <input type="email" id="email" name="email" required placeholder="nombre@dominio.com" />
        </label></p>

        <p><label for="password">Ingresa contraseña:
            <input type="password" id="password" name="password" maxlength="12"
                   placeholder="Máximo 12 caracteres" required>
        </label></p>

        <p><label for="Rol">¿Qué clase de usuario eres?
            <input type="text" id="Rol" name="rol" required
                   placeholder="Seleccione un rol" list="Roles" />
            <datalist id="Roles">
                <option value="Nutriologo">
                <option value="Paciente">
            </datalist>
        </label></p>

        <p style="text-align: center; margin-top: 20px;">
            <input type="submit" value="Enviar" />
            <input type="reset" value="Borrar" />
        </p>
    </form>
</div>
</body>
</html>
